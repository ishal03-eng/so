<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mood Booster ‚Äî For Her ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg:#0f1724; /* deep navy */
      --accent:#ff6b9a; /* pink */
      --muted:#cbd5e1;
      --card:#0b1220;
      --glass: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;font-family:system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:var(--muted);
      background: radial-gradient(ellipse at bottom right, #061022 0%, var(--bg) 60%);
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
    }
    header{padding:28px 20px 10px;display:flex;align-items:center;gap:14px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#ffd194);display:flex;align-items:center;justify-content:center;font-weight:700;color:white;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
    .title{font-size:18px}
    .subtitle{font-size:12px;color:#aab6c9}

    main{display:grid;place-items:center;padding:20px}
    .card{
      width:100%;max-width:760px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:18px;padding:28px;box-shadow:0 20px 60px rgba(2,6,23,0.6);position:relative;overflow:hidden
    }
    .top-row{display:flex;justify-content:space-between;gap:12px;align-items:center}
    h1{margin:0;font-size:30px;color:#fff}
    .typewriter{margin-top:6px;color:var(--muted);min-height:22px}

    .visual{display:flex;gap:20px;margin-top:18px;align-items:flex-start}
    .left{flex:1}
    .right{width:220px}

    .message-box{background:var(--glass);padding:14px;border-radius:12px;min-height:160px;position:relative}
    .message{font-size:18px;line-height:1.45;color:#fff}
    .controls{display:flex;gap:10px;margin-top:12px}
    button{border:0;padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.06);color:var(--muted);cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent),#ff9477);color:white;font-weight:600}
    .tiny{font-size:13px;padding:8px 10px}

    .heart-btn{display:flex;align-items:center;gap:8px}

    .right .card-meta{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px}
    .meta-row{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .meta-row img{width:40px;border-radius:8px}

    footer{margin-top:14px;text-align:center;color:#9fb0c8;font-size:13px}

    /* floating hearts */
    .hearts{pointer-events:none;position:absolute;inset:0;overflow:hidden}
    .heart{position:absolute;width:36px;height:36px;transform:translateY(0);opacity:0;will-change:transform,opacity}

    /* modal */
    .modal{position:fixed;inset:0;display:grid;place-items:center;background:rgba(2,6,23,0.6);backdrop-filter:blur(4px);visibility:hidden;opacity:0;transition:all .25s}
    .modal.open{visibility:visible;opacity:1}
    .modal-card{background:linear-gradient(180deg,#081827, #08121b);padding:22px;border-radius:14px;max-width:420px;width:92%;color:#dcecff;text-align:center}
    .modal-card h2{margin:0 0 8px}
    .modal-card p{color:#a9c0d8}

    /* mobile tweaks */
    @media (max-width:720px){
      .visual{flex-direction:column}
      .right{width:100%}
      h1{font-size:24px}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">üíå</div>
    <div>
      <div class="title">Mood Booster ‚Ä¢ For Her</div>
      <div class="subtitle">A tiny page to say sorry, to cheer her up, and to make her smile üå∏</div>
    </div>
  </header>

  <main>
    <div class="card">
      <canvas id="confetti" style="position:absolute;inset:0;pointer-events:none"></canvas>
      <div class="hearts" id="hearts"></div>

      <div class="top-row">
        <div>
          <h1>I'm sorry ‚Äî will you forgive me?</h1>
          <div class="typewriter" id="typewriter">Click "Play" and enjoy ‚Äî I've got surprises for you ‚ú®</div>
        </div>
        <div class="heart-btn">
          <button id="playMusic" class="tiny">Play music</button>
          <button id="nextMsg" title="Next" class="tiny">Next üí´</button>
        </div>
      </div>

      <div class="visual">
        <div class="left">
          <div class="message-box">
            <div class="message" id="message">A little message will appear here. You can change messages in the script ‚Äî make them personal, short and sincere.</div>
            <div class="controls">
              <button id="prev" class="tiny">‚óÄÔ∏è Prev</button>
              <button id="saySorry" class="primary">Say it from the heart ‚ù§Ô∏è</button>
              <button id="confettiBtn" class="tiny">Confetti üéâ</button>
              <!-- <button id="sendHeart" class="tiny">Send Heart üíó</button> -->
            </div>
          </div>
        </div>
        <div class="right">
          <div class="card-meta">
            <div class="meta-row">
              <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='80'><rect width='80' height='80' rx='12' fill='%23ff6b9a'/><text x='50%' y='54%' dominant-baseline='middle' text-anchor='middle' font-size='28' fill='white' font-family='Arial'>U</text></svg>" alt="u"/>
              <div>
                <div style="font-weight:700;color:white">For My Jaan</div>
                <div style="font-size:13px;color:#9fb0c8">Short & sweet notes ‚Äî swipe through</div>
              </div>
            </div>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button id="copyNote" class="tiny">Copy note</button>
              <button id="customize" class="tiny">Customize</button>
              <button id="download" class="tiny">Save as image</button>
            </div>
          </div>
        </div>
      </div>

      <footer>Open this on your phone to make it more personal. üí¨</footer>
    </div>
  </main>

  <div class="modal" id="modal">
    <div class="modal-card">
      <h2>From the heart ‚ù§Ô∏è</h2>
      <p id="modalText">I messed up. I'm really sorry. You mean the world to me.</p>
      <div style="margin-top:14px;display:flex;gap:8px;justify-content:center">
        <button id="closeModal">Close</button>
        <button id="openHeart" class="primary">Show more üíå</button>
      </div>
    </div>
  </div>

  <script>
    // ------------------ User-editable area ------------------
    const MESSAGES = [
      "I miss your smile. Can we talk? üí≠",
      "I know I hurt you and I'm truly sorry. I want to make it right.",
      "You are my favorite person ‚Äî please give me one more chance.",
      "Remember our little jokes? I want to laugh with you again.",
      "If I could fix time, I'd spend it only making you happy."
    ];

    // Optional: replace with a URL to an mp3 you both like (must be CORS-enabled or local file when testing)
    const MUSIC_URL = ""; // e.g. "./soft-song.mp3" or a hosted url
    // -------------------------------------------------------

    const msgEl = document.getElementById('message');
    const typeEl = document.getElementById('typewriter');
    const heartsEl = document.getElementById('hearts');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modalText');

    let idx = 0;
    function showMessage(i){
      i = (i + MESSAGES.length) % MESSAGES.length;
      idx = i;
      // fade out, change, fade in
      msgEl.style.opacity = 0; setTimeout(()=>{ msgEl.textContent = MESSAGES[i]; msgEl.style.opacity = 1 }, 220);
      // typewriter preview line
      typewriter(MESSAGES[i].slice(0,40)+ (MESSAGES[i].length>40? '...' : ''));
    }
    document.getElementById('nextMsg').addEventListener('click', ()=>showMessage(idx+1));
    document.getElementById('prev').addEventListener('click', ()=>showMessage(idx-1));

    document.getElementById('saySorry').addEventListener('click', ()=>{
      modalText.textContent = MESSAGES[idx]; openModal(); launchHearts(8);
    });
    document.getElementById('confettiBtn').addEventListener('click', ()=>launchConfetti(120));
    document.getElementById('sendHeart').addEventListener('click', ()=>launchHearts(6));

    // copy note
    document.getElementById('copyNote').addEventListener('click', ()=>{
      navigator.clipboard?.writeText(MESSAGES[idx]||'I love you');
      alert('Message copied ‚Äî paste it in chat or a note.');
    });

    // customize opens a prompt (quick & simple)
    document.getElementById('customize').addEventListener('click', ()=>{
      const custom = prompt('Write a short line (keep it sweet & sincere):', MESSAGES[idx]);
      if(custom!==null){ MESSAGES[idx] = custom.trim() || MESSAGES[idx]; showMessage(idx); }
    });

    // music
    let audio;
    document.getElementById('playMusic').addEventListener('click', ()=>{
      if(!MUSIC_URL){ alert('No music URL set. To add music, edit the MUSIC_URL inside the HTML file.'); return }
      if(!audio){ audio = new Audio(MUSIC_URL); audio.loop = true }
      if(audio.paused) { audio.play(); document.getElementById('playMusic').textContent='Pause music' }
      else { audio.pause(); document.getElementById('playMusic').textContent='Play music' }
    });

    // modal controls
    function openModal(){ modal.classList.add('open') }
    function closeModal(){ modal.classList.remove('open') }
    document.getElementById('closeModal').addEventListener('click', closeModal);
    document.getElementById('openHeart').addEventListener('click', ()=>{
      closeModal(); launchConfetti(160); launchHearts(14); typewriter('I love you. Always. üíñ');
    });

    // initial show
    showMessage(0);

    // ------------------ Confetti ------------------
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');
    function resizeCanvas(){ confettiCanvas.width = confettiCanvas.clientWidth; confettiCanvas.height = confettiCanvas.clientHeight; }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();

    function launchConfetti(amount=80){
      const pieces = [];
      for(let i=0;i<amount;i++){
        pieces.push({x:Math.random()*confettiCanvas.width, y:-10 + Math.random()*20, vx:(Math.random()-0.5)*6, vy:Math.random()*3+2, r:Math.random()*6+4, rot:Math.random()*360, vr:(Math.random()-0.5)*10, color: ['#ff6b9a','#ffd194','#8be7ff','#c7ffb5'][Math.floor(Math.random()*4)]});
      }
      let t=0;
      function frame(){ t++; ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
        for(const p of pieces){ p.x += p.vx; p.y += p.vy; p.vy += 0.06; p.rot += p.vr*0.1; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180); ctx.fillStyle=p.color; ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6); ctx.restore(); }
        if(pieces.some(p=>p.y < confettiCanvas.height+60)) requestAnimationFrame(frame);
        else ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      }
      requestAnimationFrame(frame);
    }

    // ------------------ Floating hearts ------------------
    function createHeart(){
      const el = document.createElement('div'); el.classList.add('heart');
      const size = 18 + Math.random()*28; el.style.width = size+'px'; el.style.height = size+'px';
      el.style.left = (10 + Math.random()*80) + '%';
      el.style.bottom = '-40px';
      el.style.opacity = 0;
      el.innerHTML = `<svg viewBox="0 0 32 29.6" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg"><path d="M23.6 0c-2.7 0-5 1.4-6.6 3.6C14.4 1.4 12.1 0 9.4 0 4.2 0 0 4.2 0 9.4c0 11.6 16 20.2 16 20.2s16-8.6 16-20.2C32 4.2 27.8 0 23.6 0z" fill="${encodeURIComponent('#ff6b9a')}"></path></svg>`;
      heartsEl.appendChild(el);
      // animate
      const rise = 3800 + Math.random()*4200;
      el.animate([
        { transform: 'translateY(0) scale(0.7)', opacity:0 },
        { transform: `translateY(-${100 + Math.random()*200}px) scale(1)`, opacity:1, offset:0.2 },
        { transform: `translateY(-${rise/10}px) scale(0.9)`, opacity:0.02 }
      ], { duration: rise, easing:'cubic-bezier(.2,.8,.2,1)' });
      setTimeout(()=>el.remove(), rise+200);
    }

    function launchHearts(n=6){ for(let i=0;i<n;i++) setTimeout(createHeart, i*180) }

    // ------------------ Typewriter ------------------
    let twTimer;
    function typewriter(text){ clearInterval(twTimer); typeEl.textContent=''; let i=0; twTimer = setInterval(()=>{ if(i<text.length) typeEl.textContent += text[i++]; else clearInterval(twTimer) }, 26) }

    // small utility: save message as PNG (simple html2canvas-free approach)
    document.getElementById('download').addEventListener('click', async ()=>{
      try{
        const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='630'><foreignObject width='100%' height='100%'><div xmlns='http://www.w3.org/1999/xhtml' style='font-family:system-ui;padding:30px;background:#071427;color:#fff;width:1140px;height:570px;box-sizing:border-box;border-radius:18px;'><h1 style='margin:0 0 8px;font-size:44px'>${escapeHtml(document.querySelector('h1').textContent)}</h1><p style='font-size:22px;color:#cfe6ff'>${escapeHtml(MESSAGES[idx])}</p></div></foreignObject></svg>`;
        const blob = new Blob([svg], {type:'image/svg+xml;charset=utf-8'});
        const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='note-for-her.svg'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      }catch(e){ alert('Save failed ‚Äî try copying the text instead.'); }
    });

    // helper
    function escapeHtml(s){ return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;') }

    // small accessibility: pressing Enter triggers the main sorry button when focused
    document.addEventListener('keydown', e=>{ if(e.key==='Enter') document.getElementById('saySorry').classList.contains('primary') && document.getElementById('saySorry').click() });

    // small playful tip for you (not visible on page) ‚Äî launch a few hearts at first visit
    setTimeout(()=>launchHearts(5), 600);
  </script>
</body>
</html>
